---
title: "Tutorial: Artifact Repository"
author: "Lukasz A. Bartnik"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Tutorial: Artifact Repository}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
library(knitr)

knitr::opts_chunk$set(collapse = TRUE, comment = "#>", prompt = FALSE, echo = TRUE)
```

Plan (TODO):

  * Browse (general)
  * Find object/artifact
  * Search for artifact (lm, plot, etc.), then browse session from that point
  * Name an object (give a new name to an object)
  * Put an artifact in a collection
  * Export (explanation, history) to Rmd
  * Explain an object



# Produce objects - sample research project

Run a sample project generation.


# Basic operations

## Project overview

We can look at R sessions recorded so far:

```{r}
artifacts$session
```

We can also see objects recorded in the repository:

```{r}
artifacts$name
```

Other keys are: `class`, `id` and `time`. Let's look at `time`:

```{r}
artifacts$time
```


## Searching for artifacts

We can limit the object selection by session identifier:

```{r}
artifacts$session$eba8e78f
```

Similarily, we can look at specific object creation time:

```{r}
artifacts$time$since_yesterday
```

In both cases, we see a `filter()` expression added to the selection
query and at most the first three objects matching this query.


## Selecting an artifact

We can retrieve a specific object from the repository:

```{r}
artifacts$name$x$value
artifacts$id$`daf87ac4`$value
```

A shortcut version of these expressions is:

```{r}
artifacts$x$value
artifacts$`daf87ac4`$value
```

The name or identifier have to uniquely identify a single object. If
there is more than one object matching the condition, you can keep
narrowing the query:

```{r}
artifacts$y$class$lm$value
```

Similarly, you can construct a query where name or id is not specified
at all.

```{r}
artifacts$time$yesterday$class$lm
```

Finally, you can use the bracket operator to access an arbitrary
object within a query result:

```{r}
artifacts$time$yesterday$class$lm[[1]]
artifacts$time$yesterday$class$lm[[2]]
```
